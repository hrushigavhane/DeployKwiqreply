 {% load static %}

 

                  {% for j in obj %}
                  
                    {% if j.wa_id == j.m_from %}
                      <div class="direct-chat-msg">
                          <div class="direct-chat-infos clearfix">
                      <span class="direct-chat-name float-left">{{ j.name }}</span>
                       <span class="direct-chat-timestamp float-left" style="padding-left:15px; font-size:10px; ">{{j.timestamp1}}</span> 
                    </div>
                          <img class="direct-chat-img" src="static/img/default_user_icon.png" >
                    {% else %}
                    {% for k in user_detail_model%}
                         <div class="direct-chat-msg right">
                             <div class="direct-chat-infos clearfix">
                      <span class="direct-chat-name float-right">{{k.comp_name}}</span>
                      <span class="direct-chat-timestamp float-right" style="padding-right:30px;font-size:10px; " >{{j.timestamp1}}</span>
                    </div>
                    {% comment %} <img class="direct-chat-img" src="static/img/default_user_icon.png" > {% endcomment %}
                    
                     <img class="direct-chat-img" src="media/{{ k.user_img }}" >
                     {% endfor%} 
                    
                    
                     {% endif %}  
                     
                     

                    <!-- /.direct-chat-infos -->

                    <!-- /.direct-chat-img -->
                    <div class="direct-chat-text" style="width:auto;">
                        {% if j.m_type == "image" %}
                            {% if j.m_url == 'media/image/' %}
                            <img src="{{j.m_url}}{{j.m_fileName}}" class="img-fluid" width="200" onclick="$('#media_view_{{j.id}}').modal('show'); $('#media_view_{{j.id}}').appendTo('body');" /><br>{{j.caption}}
                             {% comment %} <span style="float:right; font-size:9.5px; position: absolute; bottom: 0; right: 0; width: 100px; color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                            {% else %}
                            <img src="{{j.m_url}}" class="img-fluid" width="200" onclick="$('#media_view_{{j.id}}').modal('show'); $('#media_view_{{j.id}}').appendTo('body');" /><br>{{j.caption}}
                             {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px; color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                            {% endif %}
                            {{j.message}}                             
                        {% elif j.m_type == "text" %}
                            {{j.message}} 
                            {% comment %} <div style="float:right; font-size:9.5px; margin-top:20px;position: absolute; bottom: 0; right: 0; color:grey;">{{j.timestamp1}}</div> {% endcomment %}
                        {% elif j.m_type == "video" %}
                            
                                {% if j.m_url == 'media/video/' %}
                                <video  height="200" controls>
                                    <source src="{{j.m_url}}{{j.m_fileName}}" type="video/mp4">
                                    </video><br><span>{{j.caption}}</span>
                                     {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px; color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                                {% else %}
                                    <source src="{{j.m_url}}" type="video/mp4">{{j.caption}}
                                     {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                                {% endif %}                              
                               {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                            
                            {{j.message}}
                         {% elif j.m_type == "document" %}
                              {% if j.m_url == 'media/documents/' %}
                                <a href="{{j.m_url}}{{j.m_fileName}}" target="_blank">
                                <img src="static/img/file-empty.png" class="img-fluid" style="height:40px" /></a><br>{{j.caption}}
                                 {% comment %} <span style="float:right; font-size:9.5px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                              {% else %}
                                <a href="{{j.m_url}}" target="_blank">
                                <img src="static/img/file-empty.png" class="img-fluid" style="height:40px" /></a><br>{{j.caption}}
                                 {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                              {% endif %}
                             {{j.message}}
                              
                          {% elif j.m_type == "audio" or j.m_type == "voice" %}
                              {% if j.m_url == 'media/voice/' %}                             
                                
                                <audio controls>  <source src="{{j.m_url}}{{j.m_fileName}}" type="audio/ogg">
                                    Your browser does not support the audio element.
                                     {% comment %} <span style="float:right; font-size:9.5px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                                </audio>{{j.caption}}
                              {% else %}
                                <a href="{{j.m_url}}" target="_blank">
                                <img src="static/img/audio-favicon.webp" class="img-fluid" style="height:40px" /></a>{{j.caption}}
                                 {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                              {% endif %}
                             {{j.message}}   
                              {% comment %} <span style="float:right; font-size:10px; position: absolute; bottom: 0; right: 0; width: 100px;color:grey;">{{j.timestamp1}}</span> {% endcomment %}
                        {% endif %}
                    </div>
                    <!-- /.direct-chat-text -->
                  </div>
                    <div id="media_view_{{j.id}}" class="modal fade" role="dialog">
                      <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content" >
                          <div class="modal-header">
                            <h4 class="modal-title">{{j.message}}</h4>
                            <h5 class="modal-title">({{j.wa_id}})</h5>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                          </div>
                          <div class="modal-body">
                               {% if j.m_url == "media/image/" %}
                                <img class="img-fluid" src="{{j.m_url}}{{j.m_fileName}}" />
                               {% else %}
                                <img class="img-fluid" src="{{j.m_url}}" />
                              {% endif %}
                          </div>
                        </div>
                      </div>
                    </div>
                  <!-- /.direct-chat-msg -->
                  
                  
                  {% endfor %}
                  

                  



